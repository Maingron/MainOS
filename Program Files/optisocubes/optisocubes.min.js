function n(){var c,o,s,n,Y,r,e,h,f,u,v,i,a=!1,l=!1,b=!1,t=0,d=[],g=[],M=[],m=!1,p=!1,w=!1,C=!1,P=!0,F=[],x=!1,y=0,N=0,L=!1,D=!1,k=0,S=!1,E=0,R=!0,A=0;this.constructor=function(t,i){c=t,o=i,h=.5*canvas.width-Q*(Z-1),f=canvas.height-Q*($+1)*.5,s=h+c*Q+o*Q,n=f+o*Q-c*Q*.5-o*Q*.5,Y=Math.sqrt(Q*Q+.25*Q*Q),e=r=Y=Q,v=u=800-n,d[0]=new H(s+Q,n-Q/2-u),d[1]=new H(s,n-u),d[2]=new H(s,n-e-u),d[3]=new H(s+Q,n-Q/2-e-u);for(var a=0;4>a;a++)g[a]=new H(0,0),g[a].t(d[a]),g[a].x-=Q,g[a].y-=Q/2;for(a=0;4>a;a++)M[a]=new H(0,0)},this.i=function(){(b||l)&&(w=!1,m=!1,p=!1,C=!1,30<(t+=.1*a0.delta)&&(t=30),b&&(u+=t*a0.delta)>=v-t*a0.delta&&(u=v,b=!1,t=0),l&&(u-=t*a0.delta)<=v+t*a0.delta&&(u=v,l=!1,t=0),T())},this.o=function(){if(w||p||m||C){L&&15>N?(N-=1*a0.delta,i=-1):(N+=1*a0.delta,i=1);var t=Math.PI/2;d[1].h(d[0],i*y*t/25*a0.delta),d[2].h(d[0],i*y*t/25*a0.delta),d[3].h(d[0],i*y*t/25*a0.delta),24<N?(w&&(c++,w=!1),p&&(c--,p=!1),m&&(o--,m=!1),C&&(o++,C=!1),N=0,0<=e?(s=h+c*Q+o*Q,n=f+o*Q-c*Q*.5-o*Q*.5):(s=h+c*Q+o*Q,n=f+o*Q-c*Q*.5-o*Q*.5-Q),T(),x=!0):0>N&&(N=0,w=!1,C=!1,m=!1,p=!1,L=!1,T())}},this.u=function(){a&&(e<r-1.5*a0.delta?(e+=1.5*a0.delta,T()):e>r+1.5*a0.delta?(e-=1.5*a0.delta,T()):(e=r,T(),a=!1))};var B=function(){0<=e?(s=h+c*Q+o*Q,n=f+o*Q-c*Q*.5-o*Q*.5):(s=h+c*Q+o*Q,n=f+o*Q-c*Q*.5-o*Q*.5-Q),w&&(d[0].v(s+Q,n-Q/2-u),d[1].v(d[0].x-Q,d[0].y),d[2].v(d[0].x-Q,d[0].y-e),d[3].v(d[0].x,d[0].y-e),y=1,0>e&&(d[0].v(s,n-u),d[1].v(d[0].x-Q,d[0].y),d[2].v(d[0].x-Q,d[0].y-e),d[3].v(d[0].x,d[0].y-e))),p&&(d[0].v(s,n-u),d[1].v(d[0].x+Q,d[0].y),d[2].v(d[0].x+Q,d[0].y-e),d[3].v(d[0].x,d[0].y-e),y=-1,0>e&&(d[0].v(s-Q,n+Q/2-u),d[1].v(d[0].x+Q,d[0].y),d[2].v(d[0].x+Q,d[0].y-e),d[3].v(d[0].x,d[0].y-e))),m&&(d[0].v(s-Q,n-Q/2-u),d[1].v(d[0].x+Q,d[0].y),d[2].v(d[0].x+Q,d[0].y-e),d[3].v(d[0].x,d[0].y-e),y=-1,0>e&&(d[0].v(s,n-u),d[1].v(d[0].x+Q,d[0].y),d[2].v(d[0].x+Q,d[0].y-e),d[3].v(d[0].x,d[0].y-e))),C&&(d[0].v(s,n-u),d[1].v(d[0].x-Q,d[0].y),d[2].v(d[0].x-Q,d[0].y-e),d[3].v(d[0].x,d[0].y-e),y=1,0>e&&(d[0].v(s+Q,n+Q/2-u),d[1].v(d[0].x-Q,d[0].y),d[2].v(d[0].x-Q,d[0].y-e),d[3].v(d[0].x,d[0].y-e))),0>e&&(y=-y),P=!1};this.l=function(){C=p=m=w=!1,T()};var T=function(){if(P=!0,L=!1,0<=e){s=h+c*Q+o*Q,n=f+o*Q-c*Q*.5-o*Q*.5,d[0].v(s+Q,n-Q/2-u),d[1].v(d[0].x-Q,d[0].y),d[2].v(d[0].x-Q,d[0].y-e),d[3].v(d[0].x,d[0].y-e);for(var t=0;t<d.length;t++)g[t].t(d[t]),g[t].x-=Q,g[t].y-=Q/2}else for(s=h+c*Q+o*Q,n=f+o*Q-c*Q*.5-o*Q*.5-Q,d[0].v(s,n-u),d[1].v(d[0].x-Q,d[0].y),d[2].v(d[0].x-Q,d[0].y-e),d[3].v(d[0].x,d[0].y-e),t=0;t<d.length;t++)g[t].t(d[t]),g[t].x+=Q,g[t].y+=Q/2};this.g=function(t){L=t},this.M=function(){var t=x;return x=!1,t},this.m=function(){return c},this.p=function(){return o},this.C=function(){return u},this.P=function(){return e},this.F=function(){return w},this.N=function(){return p},this.L=function(){return m},this.D=function(){return C},this.k=function(t){return F[t]},this.S=function(){return D},this.A=function(){return S},this.B=function(){D=!1},this.T=function(t){S=t},this.target=function(t,i){t==c&&i==o&&(D=!0)},this.moveTo=function(t,i){o=i,u=K[c=t][o].O(),T()},this.I=function(){var t=K[c][o].O();t>u&&(u=t,T())},this.Y=function(){a=!0,r=Math.sqrt(r*r)},this.R=function(){e=Y},this.U=function(){targetCount=0},this.W=function(t){v=u=-n+t},this.X=function(t){(v=t)<u?l=!0:v>u?b=!0:u=v},this.j=function(){for(var t=0;4>t;t++)F[t]=!0},this.q=function(t){(v=t[c][o].O())<u?l=!0:v>u?b=!0:u=v,0<=o-1&&(0<e&&t[c][o-1].O()>v||0>e&&t[c][o-1].O()<v)&&(F[0]=!1),c+1<Z&&(0<e&&t[c+1][o].O()>v||0>e&&t[c+1][o].O()<v)&&(F[1]=!1),0<=c-1&&(0<e&&t[c-1][o].O()>v||0>e&&t[c-1][o].O()<v)&&(F[2]=!1),o+1<$&&(0<e&&t[c][o+1].O()>v||0>e&&t[c][o+1].O()<v)&&(F[3]=!1)},this.G=function(){c+1>Z-1&&(F[1]=!1),0>c-1&&(F[2]=!1),o+1>$-1&&(F[3]=!1),0>o-1&&(F[0]=!1)},this.H=function(t,i,a,s){0!=s||a||t==c&&i==o-1&&(F[0]=!1),1!=s||a||t==c+1&&i==o&&(F[1]=!1),2!=s||a||t==c-1&&i==o&&(F[2]=!1),3!=s||a||t==c&&i==o+1&&(F[3]=!1)},this.move=function(t){0==t&&0<o&&F[0]?(m=!0,B()):1==t&&c<Z-1&&F[1]?(w=!0,B()):2==t&&0<c&&F[2]?(p=!0,B()):3==t&&o<$-1&&F[3]?(C=!0,B()):4==t&&(a=!0,r=-r),0<=e?(s=h+c*Q+o*Q,n=f+o*Q-c*Q*.5-o*Q*.5):(s=h+c*Q+o*Q,n=f+o*Q-c*Q*.5-o*Q*.5-Q),L=!1},this.J=function(){return!!(m||w||C||p||a||b||l)};var O=function(t,i,a,s){ct.beginPath(),ct.moveTo(t.x,t.y),ct.lineTo(i.x,i.y),ct.lineTo(a.x,a.y),ct.lineTo(s.x,s.y),ct.closePath()},I=function(t){D?(0<=k&&100>k&&!P&&(k+=1*i*a0.delta),ct.fillStyle="rgba("+Math.round(k/100*t)+",0,"+Math.round(t*(1-k/100))+",1)"):S?(R=!1,100>E?E+=1*a0.delta:S=!1,ct.fillStyle="rgba("+Math.round(E/100*t)+",0,"+Math.round(t*(1-E/100))+",1)"):R?ct.fillStyle="rgba(0,0,"+Math.round(t)+",1)":(ct.fillStyle="rgba("+Math.round(t)+",0,0,1)",k=0,E=0),V?(A+=.03*a0.delta,ct.strokeStyle="rgba(255,255,255,"+(.5+(Math.sin(A)+1)/4)+")"):(A+=.015*a0.delta,ct.strokeStyle="rgba(255,255,255,"+(.25+(Math.sin(A)+1)/4)+")"),ct.lineWidth=1,ct.stroke(),ct.fill()};this.display=function(){M[0].t(d[0]);for(var t=1;4>t;t++){var i=(d[t].x-d[0].x)/2;(m||C)&&(i*=-1),M[t].v(d[t].x,d[t].y-i)}for(t=0;t<d.length;t++)g[t].t(M[t]),0<=e?P||p||w?(g[t].x-=Q,g[t].y-=Q/2):(g[t].x+=Q,g[t].y-=Q/2):P||p||w?(g[t].x+=Q,g[t].y+=Q/2):(g[t].x-=Q,g[t].y+=Q/2);0<=e?(O(M[0],M[1],M[2],M[3]),m||C?I(50):(p||w||P)&&I(150),O(g[0],M[0],M[1],g[1]),m&&M[2].x<M[0].x?I(150*N/25):w&&M[2].x>M[0].x&&I(0+50*N/25),O(g[2],M[2],M[1],g[1]),w||p&&M[2].x<M[0].x?I(50+200*N/25):m||C&&M[2].x>M[0].x?I(150+100*N/25):P&&I(50),O(g[2],M[2],M[3],g[3]),m&&M[2].x>d[0].x||C?I(250-100*N/25):p?I(250-200*N/25):w&&M[2].x<d[0].x?I(250-100*N/25):P&&I(250),O(M[0],M[3],g[3],g[0]),p&&M[2].x>d[0].x?I(50-50*N/25):C&&M[2].x<d[0].x&&I(150-150*N/25)):(O(M[0],M[1],M[2],M[3]),m||C?I(50):(p||w||P)&&I(150),O(g[0],M[0],M[1],g[1]),p&&M[2].x<M[0].x?I(0+50*N/25):C&&M[2].x>M[0].x&&I(0+150*N/25),O(g[2],M[2],M[1],g[1]),w&&M[2].x>M[0].x?I(150+100*N/25):p?I(50+200*N/25):(m&&M[2].x<M[0].x||C)&&I(150+100*N/25),O(g[2],M[2],M[3],g[3]),m||C&&M[2].x<d[0].x?I(250-100*N/25):p&&M[2].x>d[0].x||w?I(250-200*N/25):P&&I(250),O(M[0],M[3],g[3],g[0]),m&&M[2].x>d[0].x?I(150-150*N/25):w&&M[2].x<d[0].x?I(50-50*N/25):P&&I(50))}}function L(t,i){var a=t.getBoundingClientRect();return{x:i.clientX-a.left,y:i.clientY-a.top}}function D(){for(audiochannels=[],a=0;100>a;a++)audiochannels[a]=[],audiochannels[a].channel=new Audio,audiochannels[a].finished=-1;this.play=function(t){for(a=0;a<audiochannels.length;a++)if(thistime=new Date,audiochannels[a].finished<thistime.getTime()){audiochannels[a].finished=thistime.getTime()+1e3*document.getElementById(t).duration,audiochannels[a].channel.src=document.getElementById(t).src,audiochannels[a].channel.load(),audiochannels[a].channel.play();break}}}function H(t,i){this.x=t,this.y=i,this.add=function(t){this.x+=t.x,this.y+=t.y},this.normalize=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y);this.x/=t,this.y/=t},this.K=function(t){this.x*=t,this.y*=t},this.div=function(t){this.x/=t,this.y/=t},this.V=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},this.Z=function(t){this.normalize(),this.K(t)},this.$=function(t,i,a,s){this.x=t-a,this.y=i-s},this.sub=function(t){this.x-=t.x,this.y-=t.y},this.heading=function(){return Math.atan2(this.y,this.x)},this.h=function(t,i){this.sub(t);var a,s=(s=this.heading())+i;(a=new H(a=this.V()*Math.cos(s),s=this.V()*Math.sin(s))).add(t),this.x=a.x,this.y=a.y},this._=function(t){for(var i=this.y=this.x=0;i<t.length;i++)this.x+=t[i].x,this.y+=t[i].y;this.div(t.length)},this.t=function(t){this.x=t.x,this.y=t.y},this.v=function(t,i){this.x=t,this.y=i},this.t0=function(t,i,a){this.x=(i.x-t.x)*a+t.x,this.y=(i.y-t.y)*a+t.y},this.i0=function(t,i){this.x-=t.x,this.y-=t.y;var a=Math.atan2(this.y,this.x),s=Math.cos(a)*i;a=Math.sin(a)*i;this.x+=s,this.y+=a,this.x+=t.x,this.y+=t.y}}function i(t,i){var a=t.x-i.x,s=t.y-i.y;return Math.sqrt(a*a+s*s)}function c(t,i){return Math.atan2(i.y-t.y,i.x-t.x)}function k(t,i,a){var s;return(s=(i=c(t,i))>(t=c(t,a))?i-t:t-i)>Math.PI&&(s=Math.PI-s),s}function S(t,i,a){var s=Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2);return i=Math.pow(i.x-a.x,2)+Math.pow(i.y-a.y,2),t=Math.pow(a.x-t.x,2)+Math.pow(a.y-t.y,2),Math.acos((s+i-t)/Math.sqrt(4*s*i))}function E(){var s,c,o,n,a,r,e,h,f,u,v,l,b,d,g,M,m,p,w,C,P=0,i=0,F=30,y=!1,N=0,L=30,D=!1,k=!1,S=!1,Y=0,E=!1,A=0,t=new H(0,0),B=[],x=!1,R=!1,T=!1,U=!1,W=!1,X=!1,O=!1,j=!1,q=!1,z=!1,I=!1,G=!1;this.constructor=function(t,i){s=t,c=i;var a=canvas.height-Q*($+1)*.5;for(o=.5*canvas.width-Q*(Z-1)+t*Q+i*Q,n=a+i*Q-t*Q*.5-i*Q*.5,Y=2*Z-(Z-(t-i))+.1*t,a=0;4>a;a++)B[a]=new H(0,0)},this.update=function(){D&&0<=(N+=.075*a0.delta)&&(P=i+1.5*L*Math.sin(N),S?(P<F+.075*a0.delta||Math.sin(N)>Math.PI)&&(P=F,D=!1):(P>F||Math.sin(N)>Math.PI/2)&&(S=!0)),k&&0<=(N+=.075*a0.delta)&&(P=i+1.05*L*Math.sin(N),S?(P>F-.075*a0.delta||Math.sin(N)>Math.PI)&&(P=F,k=!1):(P<F||Math.sin(N)>Math.PI/2)&&(S=!0))},this.display=function(){ct.lineWidth=1,(0==s||K[s][c].O()>K[s-1][c].O())&&(ct.beginPath(),ct.moveTo(o,n-P),ct.lineTo(o,n),ct.lineTo(o-Q,n-Q/2),ct.lineTo(o-Q,n-Q/2-P),ct.closePath(),ct.fillStyle="rgba(50,50,50,1)",ct.fill(),(0==s||K[s][c].O()>K[s-1][c].O()+20)&&(ct.fillStyle=r,ct.fill(),ct.fillStyle=a,ct.fill()),i0||(x&&(ct.fillStyle=e,ct.fill()),R&&(ct.fillStyle=h,ct.fill()),T&&(ct.fillStyle=f,ct.fill()),U&&(ct.fillStyle=u,ct.fill()))),(c==$-1||K[s][c].O()>K[s][c+1].O())&&(ct.beginPath(),ct.moveTo(o,n-P),ct.lineTo(o,n),ct.lineTo(o+Q,n-Q/2),ct.lineTo(o+Q,n-Q/2-P),ct.closePath(),ct.fillStyle="rgba(125,125,125,1)",ct.fill(),(c==$-1||K[s][c].O()>K[s][c+1].O()+20)&&(ct.fillStyle=v,ct.fill(),ct.fillStyle=l,ct.fill()),i0||(W&&(ct.fillStyle=b,ct.fill()),X&&(ct.fillStyle=d,ct.fill()),O&&(ct.fillStyle=g,ct.fill()),j&&(ct.fillStyle=M,ct.fill()))),0<P&&(ct.beginPath(),ct.moveTo(o,n-P),ct.lineTo(o-Q,n-Q/2-P),ct.lineTo(o,n-Q-P),ct.lineTo(o+Q,n-Q/2-P),ct.closePath(),ct.fillStyle="rgba(200,200,200,1)",ct.fill(),i0||(q&&(ct.fillStyle=m,ct.fill()),z&&(ct.fillStyle=p,ct.fill()),I&&(ct.fillStyle=w,ct.fill()),G&&(ct.fillStyle=C,ct.fill())),ct.strokeStyle="rgba(175,175,175,1)",ct.stroke())},this.a0=function(t){G=I=z=q=j=O=X=W=U=T=R=x=!1;var i=n;0<s-1&&(90>(i=K[s-1][c].O())?i=45:135>i&&(i=90),i=n-i),(r=ct.createLinearGradient(o-Q/2,i,o-Q/2+45,i-90)).addColorStop(0,"rgba(25,25,25,"+t+")"),r.addColorStop(.3,"rgba(50,50,50,"+t+")"),(a=ct.createLinearGradient(o-Q/2,n-P-Q/2,o-Q/2-45,n-P-Q/2+90)).addColorStop(0,"rgba(25,25,25,"+(1-t)+")"),a.addColorStop(.3,"rgba(50,50,50,"+(1-t)+")"),i=n,c+1<Z&&(90>(i=K[s][c+1].O())?i=45:135>i&&(i=90),i=n-i),(v=ct.createLinearGradient(o-Q/2,i,o-Q/2-45,i-90)).addColorStop(0,"rgba(100,100,100,"+t+")"),v.addColorStop(.3,"rgba(125,125,125,"+t+")"),(l=ct.createLinearGradient(o-Q/2,n-P-Q/2,o-Q/2+45,n-P-Q/2+90)).addColorStop(0,"rgba(100,100,100,"+(1-t)+")"),l.addColorStop(.3,"rgba(125,125,125,"+(1-t)+")"),i0||(s+1<Z&&K[s][c].O()<K[s+1][c].O()&&((b=ct.createLinearGradient(o+Q,n-P/2,o,n-P/2)).addColorStop(0,"rgba(125,125,125,"+(1-t)+")"),b.addColorStop(.5,"rgba(125,125,125,0)"),W=!0),c+1<$&&K[s][c].O()>=K[s][c+1].O()+45&&0<s-1&&K[s-1][c+1].O()+45<=K[s][c+1].O()&&((d=ct.createLinearGradient(o,n-P/2,o+Q,n-P/2)).addColorStop(0,"rgba(125,125,125,"+t+")"),d.addColorStop(.4,"rgba(125,125,125,0)"),X=!0),0<c-1&&K[s][c].O()<K[s][c-1].O()&&((e=ct.createLinearGradient(o-Q,n-P/2,o,n-P/2)).addColorStop(0,"rgba(50,50,50,"+(1-t)+")"),e.addColorStop(.5,"rgba(50,50,50,0)"),x=!0),0<s-1&&K[s][c].O()>K[s-1][c].O()+10&&c+1<Z&&K[s-1][c+1].O()+10<K[s-1][c].O()&&((h=ct.createLinearGradient(o,n-P/2,o-Q,n-P/2)).addColorStop(0,"rgba(50,50,50,"+t+")"),h.addColorStop(.4,"rgba(50,50,50,0)"),R=!0),(g=ct.createLinearGradient(o,n-P/2,o+Q,n-P/2)).addColorStop(0,"rgba(125,125,125,0)"),g.addColorStop(0,"rgba(125,125,125,0)"),(f=ct.createLinearGradient(o,n-P/2,o+Q,n-P/2)).addColorStop(0,"rgba(125,125,125,0)"),f.addColorStop(0,"rgba(125,125,125,0)"),c+1<$?K[s][c].O()>K[s][c+1].O()&&(0<s-1?(0==s||K[s][c].O()>K[s-1][c].O())&&((g=ct.createLinearGradient(o-Q/2,n-P-Q/4,o+Q,n-Q-P+22.5)).addColorStop(0,"rgba(100,100,100,"+(1-t)+")"),g.addColorStop(.8,"rgba(100,100,100,0)"),O=!0,(f=ct.createLinearGradient(o+Q/2,n-P-Q/4,o-Q,n-Q-P+22.5)).addColorStop(0,"rgba(25,25,25,"+(1-t)+")"),f.addColorStop(.8,"rgba(25,25,25,0)"),T=!0):0==s&&((g=ct.createLinearGradient(o-Q/2,n-P-Q/4,o+Q,n-Q-P+22.5)).addColorStop(0,"rgba(100,100,100,"+(1-t)+")"),g.addColorStop(.8,"rgba(100,100,100,0)"),O=!0,(f=ct.createLinearGradient(o+Q/2,n-P-Q/4,o-Q,n-Q-P+22.5)).addColorStop(0,"rgba(25,25,25,"+(1-t)+")"),f.addColorStop(.8,"rgba(25,25,25,0)"),T=!0)):c==$-1&&0<s-1?K[s][c].O()>K[s-1][c].O()&&((g=ct.createLinearGradient(o-Q/2,n-P-Q/4,o+Q,n-Q-P+22.5)).addColorStop(0,"rgba(100,100,100,"+(1-t)+")"),g.addColorStop(.8,"rgba(100,100,100,0)"),O=!0,(f=ct.createLinearGradient(o+Q/2,n-P-Q/4,o-Q,n-Q-P+22.5)).addColorStop(0,"rgba(25,25,25,"+(1-t)+")"),f.addColorStop(.8,"rgba(25,25,25,0)"),T=!0):c==$-1&&0==s&&((g=ct.createLinearGradient(o-Q/2,n-P-Q/4,o+Q,n-Q-P+22.5)).addColorStop(0,"rgba(100,100,100,"+(1-t)+")"),g.addColorStop(.8,"rgba(100,100,100,0)"),O=!0,(f=ct.createLinearGradient(o+Q/2,n-P-Q/4,o-Q,n-Q-P+22.5)).addColorStop(0,"rgba(25,25,25,"+(1-t)+")"),f.addColorStop(.8,"rgba(25,25,25,0)"),T=!0),i=n,c+1<$&&K[s][c].O()-90>=K[s][c+1].O()&&(i+=47),c+1<$&&K[s][c].O()>=K[s][c+1].O()+45&&s+1<Z&&K[s][c+1].O()<=K[s+1][c+1].O()-45&&((M=ct.createLinearGradient(o-Q/2,i-P-Q/4,o+Q,i-Q-P+22.5)).addColorStop(.8,"rgba(100,100,100,0)"),M.addColorStop(1,"rgba(100,100,100,"+t+")"),j=!0),i=n,0<s-1&&K[s][c].O()-90>=K[s-1][c].O()&&(i+=47),0<s-1&&K[s][c].O()>=K[s-1][c].O()+45&&0<c-1&&K[s-1][c].O()<=K[s-1][c-1].O()-45&&((u=ct.createLinearGradient(o+Q/2,i-P-Q/4,o-Q,i-Q-P+22.5)).addColorStop(.8,"rgba(25,25,25,0)"),u.addColorStop(1,"rgba(25,25,25,"+t+")"),U=!0),0<c-1&&K[s][c].O()<K[s][c-1].O()&&((m=ct.createLinearGradient(o-Q/2,n-P-.75*Q,o+Q/2,n-P+.75*Q+5)).addColorStop(0,"rgba(175,175,175,"+t+")"),m.addColorStop(.3,"rgba(175,175,175,0)"),q=!0),s+1<Z&&K[s][c].O()<K[s+1][c].O()&&((p=ct.createLinearGradient(o+Q/2,n-P-.75*Q,o-Q/2,n-P+.75*Q+5)).addColorStop(0,"rgba(175,175,175,"+t+")"),p.addColorStop(.3,"rgba(175,175,175,0)"),z=!0),c==$-1||K[s][c].O()>K[s][c+1].O()?((w=ct.createLinearGradient(o-Q/2,n-P-.75*Q,o+Q/2,n-P+.75*Q+5)).addColorStop(.1,"rgba(175,175,175,0)"),w.addColorStop(.5,"rgba(175,175,175,"+(1-t)+")"),I=!0):I=!1,(0==s||K[s][c].O()>K[s-1][c].O())&&((C=ct.createLinearGradient(o+Q/2,n-P-.75*Q,o-Q/2,n-P+.75*Q+5)).addColorStop(.1,"rgba(175,175,175,0)"),C.addColorStop(.5,"rgba(175,175,175,"+(1-t)+")"),G=!0))},this.s0=function(){B[0].v(o,n-P),B[1].v(o-Q,n-Q/2-P),B[2].v(o,n-Q-P),B[3].v(o+Q,n-Q/2-P),!y||V||_||t0||(E||(A+=.05*a0.delta,ct.beginPath(),ct.moveTo(B[0].x,B[0].y),1>A?(t.t0(B[0],B[1],A),ct.lineTo(t.x,t.y)):2>A?(ct.lineTo(B[1].x,B[1].y),t.t0(B[1],B[2],A-1),ct.lineTo(t.x,t.y)):3>A?(ct.lineTo(B[1].x,B[1].y),ct.lineTo(B[2].x,B[2].y),t.t0(B[2],B[3],A-2),ct.lineTo(t.x,t.y)):4>A?(ct.lineTo(B[1].x,B[1].y),ct.lineTo(B[2].x,B[2].y),ct.lineTo(B[3].x,B[3].y),t.t0(B[3],B[0],A-3),ct.lineTo(t.x,t.y)):E=!0,ct.strokeStyle="rgba(0,0,255,1)",ct.stroke(),ct.save(),ct.scale(2,1),ct.beginPath(),ct.arc(t.x/2,t.y,3,0,2*Math.PI,!1),ct.fillStyle="rgba(200,200,255,0.75)",ct.fill(),ct.restore(),ct.beginPath(),ct.arc(t.x,t.y,1,0,2*Math.PI,!1),ct.fillStyle="white",ct.fill()),E&&(ct.beginPath(),ct.moveTo(B[0].x,B[0].y),ct.lineTo(B[1].x,B[1].y),ct.lineTo(B[2].x,B[2].y),ct.lineTo(B[3].x,B[3].y),ct.closePath(),ct.strokeStyle="rgba(0,0,255,1)",ct.stroke(),0<J[0].P()?A+=.05*a0.delta:A-=.05*a0.delta,0>A?(A=3.99,t.t0(B[3],B[0],A-3)):1>A?t.t0(B[0],B[1],A):2>A?t.t0(B[1],B[2],A-1):3>A?t.t0(B[2],B[3],A-2):4>A?t.t0(B[3],B[0],A-3):4<=A&&(A=0,t.t0(B[0],B[1],A)),ct.save(),ct.scale(2,1),ct.beginPath(),ct.arc(t.x/2,t.y,3,0,2*Math.PI,!1),ct.fillStyle="rgba(200,200,255,0.15)",ct.fill(),ct.restore(),ct.beginPath(),ct.arc(t.x,t.y,1,0,2*Math.PI,!1),ct.fillStyle="rgba(255,255,255,0.4)",ct.fill()))},this.c0=function(t){y=t,E=!1,A=0},this.o0=function(){return y},this.J=function(){return!(!D&&!k)},this.R=function(t){(F=t)>P?D=!0:F<P&&(k=!0),134<(L=F-P)&&(L-=15),89<L&&(L-=15),N=-Y/2,i=P,S=!1},this.n0=function(){F==P&&(D=!0,L=20,i=P,N=-Y/2,S=!1)},this.O=function(){return P}}function A(){for(var s=[],t=0;4>t;t++)s[t]=!1;var i=0,c="",a=3,o=!1;this.display=function(){o&&(c="[      Restart from beginning? y/n      ]");for(var t=1;20>=t;t++)ct.beginPath(),ct.arc(20,canvas.height/21*t,5,0,2*Math.PI,!1),ct.lineWidth=1,ct.strokeStyle="#000000aa",ct.stroke(),t<r&&(ct.fillStyle="#000000aa",ct.fill());for(t=21;40>=t;t++)ct.beginPath(),ct.arc(canvas.width-20,canvas.height/21*(t-20),5,0,2*Math.PI,!1),ct.lineWidth=1,ct.strokeStyle="#000000aa",ct.stroke(),t<r&&(ct.fillStyle="#000000aa",ct.fill());1==r&&V?(a-=.02*a0.delta,c="[            o  p  t  i  s  o  c  u  b  e  s            ]",0>=a&&(a=-1,c="[       w       ]",i0&&(c="[        swipe to move        ]")),ct.font="15pt Calibri",i0&&(ct.font="20pt Calibri"),ct.textAlign="center",ct.fillStyle="rgba(200,200,200,"+a+")",ct.fillText(c,canvas.width/2,canvas.height/5-30)):i!=r||V?a=-1:(1<=(a+=.02*a0.delta)&&(a=1),ct.font="15pt Calibri",i0&&(ct.font="20pt Calibri"),ct.textAlign="center",ct.fillStyle="rgba(200,200,200,"+a+")",ct.fillText(c,canvas.width/2,canvas.height/5-30)),i=r},this.r0=function(t){for(var i=0;i<Z;i++)for(var a=0;a<$;a++)K[i][a].c0(!1);for(i=0;i<J.length;i++)J[i].U(0);for(this.e0(0,Z,0,$,45),0<t&&8>t?1<J.length?J.splice(1,J.length-1):1>J.length&&(J[0]=new n,J[0].constructor(1,Z-2),s[0]=!0):8<=t&&17>t?(1>J.length&&(J[0]=new n,J[0].constructor(1,Z-2),s[0]=!0),2>J.length?(J[1]=new n,J[1].constructor(1,Z-2),s[1]=!0):2<J.length&&J.splice(2,J.length-2)):17<=t&&28>t?(1>J.length&&(J[0]=new n,J[0].constructor(1,Z-2),s[0]=!0),2>J.length&&(J[1]=new n,J[1].constructor(1,Z-2),s[1]=!0),3>J.length?(J[2]=new n,J[2].constructor(1,Z-2),s[2]=!0):3<J.length&&J.splice(3,J.length-3)):28<=t&&41>=t&&(1>J.length&&(J[0]=new n,J[0].constructor(1,Z-2),s[0]=!0),2>J.length&&(J[1]=new n,J[1].constructor(1,Z-2),s[1]=!0),3>J.length&&(J[2]=new n,J[2].constructor(1,Z-2),s[2]=!0),4>J.length&&(J[3]=new n,J[3].constructor(1,Z-2),s[3]=!0)),1==t?(K[1][1].c0(!0),J[0].moveTo(1,Z-2),c="[       w       ]",i0&&(c="[        swipe to move        ]")):2==t?(K[7][1].c0(!0),J[0].moveTo(1,1),c="[       d       ]",i0&&(c="[     swipe & hold to keep moving    ]")):3==t?(this.e0(5,Z,0,$,90),K[7][7].c0(!0),J[0].moveTo(7,1),c="[       s       ]",i0&&(c="[     tap to shift    ]")):4==t?(this.e0(5,Z,0,$,90),K[1][7].c0(!0),J[0].moveTo(7,7),c="[       a       ]",i0&&(c="")):5==t?(this.e0(0,Z,0,4,90),K[1][1].c0(!0),J[0].moveTo(1,7),c="[     shift     ]",i0&&(c="[     tap to shift    ]")):6==t?(this.e0(0,Z,0,4,90),this.e0(5,Z,0,4,135),K[7][1].c0(!0),J[0].moveTo(1,1),c=" "):7==t?(this.e0(0,Z,0,4,90),this.e0(5,Z,0,$,90),this.e0(5,Z,0,4,135),K[1][1].c0(!0),J[0].moveTo(7,1)):8==t?(this.e0(0,Z,0,3,90),K[4][1].c0(!0),K[4][7].c0(!0),J[0].moveTo(1,1),J[1].moveTo(1,7)):9==t?(this.e0(6,Z,0,$,90),this.e0(6,7,$-1,$,45),K[7][1].c0(!0),K[7][7].c0(!0),J[0].moveTo(4,1),J[1].moveTo(4,7)):10==t?(this.e0(Z-3,Z,0,3,90),K[1][1].c0(!0),K[1][5].c0(!0),J[0].moveTo(7,1),J[1].moveTo(7,7)):11==t?(this.e0(Z-5,Z,0,5,90),K[3][1].c0(!0),K[7][5].c0(!0),J[0].moveTo(1,1),J[1].moveTo(1,5)):12==t?(this.e0(Z-5,Z,0,5,90),K[6][1].c0(!0),K[7][2].c0(!0),J[0].moveTo(3,1),J[1].moveTo(7,5)):13==t?(this.e0(6,Z,0,$,90),this.e0(0,Z,0,3,90),K[1][1].c0(!0),K[7][7].c0(!0),J[0].moveTo(6,1),J[1].moveTo(7,2)):14==t?(this.e0(5,Z,0,4,90),K[2][6].c0(!0),K[7][1].c0(!0),J[0].moveTo(1,1),J[1].moveTo(7,7)):15==t?(this.e0(5,Z,0,4,90),K[2][4].c0(!0),K[4][6].c0(!0),J[0].moveTo(2,6),J[1].moveTo(7,1)):16==t?(this.e0(6,Z,0,$,90),this.e0(0,Z,0,3,90),this.e0(4,Z,0,5,135),K[3][1].c0(!0),K[7][5].c0(!0),J[0].moveTo(2,4),J[1].moveTo(4,6)):17==t?(this.e0(3,Z,0,3,90),this.e0(6,Z,0,6,90),K[1][1].c0(!0),K[4][4].c0(!0),K[7][7].c0(!0),J[0].moveTo(3,1),J[1].moveTo(7,5),J[2].moveTo(1,7)):18==t?(this.e0(0,Z,0,3,90),this.e0(0,1,2,3,45),K[7][4].c0(!0),K[1][5].c0(!0),K[7][6].c0(!0),J[0].moveTo(1,1),J[1].moveTo(4,4),J[2].moveTo(7,7)):19==t?(this.e0(3,Z,0,6,90),this.e0(6,Z,0,$,90),this.e0(6,Z,0,3,135),K[4][1].c0(!0),K[4][4].c0(!0),K[7][7].c0(!0),J[0].moveTo(7,4),J[1].moveTo(1,5),J[2].moveTo(7,6)):20==t?(this.e0(0,Z,0,7,90),this.e0(6,Z,0,4,135),K[1][1].c0(!0),K[2][4].c0(!0),K[4][5].c0(!0),J[0].moveTo(4,1),J[1].moveTo(4,4),J[2].moveTo(7,7)):21==t?(this.e0(1,Z,0,$-1,90),this.e0(5,Z,0,4,135),this.e0(0,2,$-2,$,45),K[1][6].c0(!0),K[2][7].c0(!0),K[4][4].c0(!0),J[0].moveTo(1,1),J[1].moveTo(2,4),J[2].moveTo(4,5)):22==t?(this.e0(7,Z,0,$,90),this.e0(0,Z,0,3,135),this.e0(0,3,0,3,90),this.e0(0,1,2,3,45),K[1][1].c0(!0),K[1][5].c0(!0),K[7][6].c0(!0),J[0].moveTo(1,6),J[1].moveTo(2,7),J[2].moveTo(4,4)):23==t?(this.e0(4,Z,0,$,90),this.e0(0,Z,0,4,135),this.e0(6,Z,0,6,135),K[5][1].c0(!0),K[1][2].c0(!0),K[7][3].c0(!0),J[0].moveTo(1,1),J[1].moveTo(1,5),J[2].moveTo(7,6)):24==t?(this.e0(3,Z,0,6,90),this.e0(6,Z,0,3,135),K[7][1].c0(!0),K[4][4].c0(!0),K[7][7].c0(!0),J[0].moveTo(5,1),J[1].moveTo(1,2),J[2].moveTo(7,3)):25==t?(this.e0(5,Z,0,$,90),this.e0(3,5,0,1,90),K[1][1].c0(!0),K[2][4].c0(!0),K[1][7].c0(!0),J[0].moveTo(7,1),J[1].moveTo(4,4),J[2].moveTo(7,7)):26==t?(this.e0(3,6,0,$,90),this.e0(6,Z,0,$,135),this.e0(3,4,$-2,$,45),K[1][2].c0(!0),K[4][3].c0(!0),K[7][4].c0(!0),J[0].moveTo(1,1),J[1].moveTo(2,4),J[2].moveTo(1,7)):27==t?(this.e0(6,Z,0,$,90),this.e0(0,Z,0,3,90),this.e0(4,Z,0,5,135),K[2][1].c0(!0),K[7][6].c0(!0),K[7][1].c0(!0),J[0].moveTo(1,2),J[1].moveTo(4,3),J[2].moveTo(7,4)):28==t?(this.e0(5,Z,0,4,90),K[3][2].c0(!0),K[3][5].c0(!0),K[6][2].c0(!0),K[6][5].c0(!0),J[0].moveTo(2,1),J[1].moveTo(7,6),J[2].moveTo(7,1),J[3].moveTo(1,7)):29==t?(this.e0(3,Z,0,3,90),this.e0(6,Z,0,6,90),K[0][2].c0(!0),K[3][5].c0(!0),K[6][8].c0(!0),K[6][2].c0(!0),J[0].moveTo(3,2),J[1].moveTo(3,5),J[2].moveTo(6,2),J[3].moveTo(6,5)):30==t?(this.e0(0,Z,0,3,90),this.e0(0,1,2,3,45),this.e0(8,9,3,4,90),K[2][5].c0(!0),K[4][3].c0(!0),K[4][7].c0(!0),K[6][5].c0(!0),J[0].moveTo(1,1),J[1].moveTo(4,4),J[2].moveTo(7,7),J[3].moveTo(7,1)):31==t?(this.e0(3,Z,0,6,90),this.e0(6,Z,0,$,90),this.e0(6,Z,0,3,135),K[4][1].c0(!0),K[4][4].c0(!0),K[7][7].c0(!0),K[7][1].c0(!0),J[0].moveTo(2,5),J[1].moveTo(4,3),J[2].moveTo(4,7),J[3].moveTo(6,5)):32==t?(this.e0(2,Z,0,$,90),this.e0(5,Z,0,3,135),K[3][1].c0(!0),K[3][4].c0(!0),K[3][7].c0(!0),K[6][7].c0(!0),J[0].moveTo(4,1),J[1].moveTo(4,4),J[2].moveTo(7,7),J[3].moveTo(7,1)):33==t?(this.e0(1,Z,0,$-1,90),this.e0(5,Z,0,4,135),this.e0(0,2,$-2,$,45),K[1][0].c0(!0),K[8][7].c0(!0),K[1][6].c0(!0),K[2][7].c0(!0),J[0].moveTo(3,1),J[1].moveTo(3,4),J[2].moveTo(3,7),J[3].moveTo(6,7)):34==t?(this.e0(7,Z,0,$,90),this.e0(0,Z,0,3,135),this.e0(0,3,0,3,90),this.e0(0,1,2,3,45),K[1][1].c0(!0),K[1][7].c0(!0),K[7][1].c0(!0),K[7][7].c0(!0),J[0].moveTo(1,0),J[1].moveTo(8,7),J[2].moveTo(1,6),J[3].moveTo(2,7)):35==t?(this.e0(0,Z,0,4,90),this.e0(5,Z,0,$,135),this.e0(3,Z,0,2,135),K[1][6].c0(!0),K[2][2].c0(!0),K[5][1].c0(!0),K[6][6].c0(!0),J[0].moveTo(1,1),J[1].moveTo(1,7),J[2].moveTo(7,1),J[3].moveTo(7,7)):36==t?(this.e0(3,Z,0,6,90),this.e0(6,Z,0,3,135),K[7][1].c0(!0),K[1][1].c0(!0),K[7][7].c0(!0),K[4][4].c0(!0),J[0].moveTo(1,6),J[1].moveTo(2,2),J[2].moveTo(5,1),J[3].moveTo(6,6)):37==t?(this.e0(5,Z,0,$,90),this.e0(3,5,0,1,90),K[3][0].c0(!0),K[5][0].c0(!0),K[7][6].c0(!0),K[2][6].c0(!0),J[0].moveTo(7,1),J[1].moveTo(1,1),J[2].moveTo(7,7),J[3].moveTo(4,4)):38==t?(this.e0(0,Z,0,6,90),this.e0(0,Z,0,3,135),this.e0(0,2,5,6,45),this.e0(0,1,2,3,90),K[1][7].c0(!0),K[7][1].c0(!0),K[3][7].c0(!0),K[5][4].c0(!0),J[0].moveTo(3,0),J[1].moveTo(5,0),J[2].moveTo(7,6),J[3].moveTo(2,6)):39==t?(this.e0(6,Z,0,$,90),this.e0(0,Z,0,3,90),this.e0(4,Z,0,5,135),K[3][1].c0(!0),K[7][5].c0(!0),K[5][2].c0(!0),K[6][3].c0(!0),J[0].moveTo(1,7),J[1].moveTo(7,1),J[2].moveTo(3,7),J[3].moveTo(5,4)):40==t?(this.e0(3,Z,0,3,90),this.e0(6,Z,0,6,90),K[1][2].c0(!0),K[5][1].c0(!0),K[7][3].c0(!0),K[6][7].c0(!0),J[0].moveTo(3,1),J[1].moveTo(7,5),J[2].moveTo(5,2),J[3].moveTo(6,3)):41==t&&(c="[        You  took  "+m+"  moves        ]",J[0].moveTo(1,2),J[1].moveTo(5,1),J[2].moveTo(7,3),J[3].moveTo(6,7)),i=0;i<$;i++)for(a=0;a<Z;a++)K[i][a].n0();for(i=0;i<s.length;i++)s[i]&&(s[i]=!1,J[i].W(800),J[i].X(160),J[i].l())},this.e0=function(t,i,a,s,c){for(;t<i;t++)for(var o=a;o<s;o++)K[t][o].R(c)},this.h0=function(t){(o=t)||(c="")},this.next=function(t){V||(r+=t,this.r0(r))}}loadfile=function(){return!1},savefile=function(){return!1};var o,J=[],K=[],Q=20,V=!1,r=1,B="C:/Program Files/optisocubes/storedLevel.dat",T="C:/Program Files/optisocubes/storedMoves.dat";loadfile("C:/Program Files/optisocubes")||savefile("C:/Program Files/optisocubes"," ",1);var e,s,Z=9,$=9,h=!1,f=!1,u=!1,v=!1,l=!1,b=!1,d=!1,g=!1,M=!1,_=!1,t0=!0,m=0,p=0,w=!1,C=new H(0,0),P=new H(0,0),t=300,O=25,F=35,i0=!1,I=!1,Y=function(){0<J.length&&J.splice(0,J.length),Q=20,V=!1,r=1,$=Z=9,_=M=g=d=b=l=v=u=f=h=!1,t0=!0,p=m=0,w=!1,o=new A;for(var t=0;t<Z;t++){K[t]=[];for(var i=0;i<$;i++)K[t][i]=new E,K[t][i].constructor(t,i)}try{"undefined"!=typeof Storage&&(loadfile("C:/Program Files/optisocubes/storedLevel.dat")&&!isNaN(loadfile("C:/Program Files/optisocubes/storedLevel.dat"))?(r=Number(loadfile("C:/Program Files/optisocubes/storedLevel.dat")),savefile("C:/Program Files/optisocubes/storedLevel.dat",Number(r),1)):(r=1,savefile("C:/Program Files/optisocubes/storedLevel.dat",Number(r),1)),loadfile("C:/Program Files/optisocubes/storedMoves.dat")&&!isNaN(loadfile("C:/Program Files/optisocubes/storedMoves.dat"))?(m=Number(loadfile("C:/Program Files/optisocubes/storedMoves.dat")),savefile("C:/Program Files/optisocubes/storedMoves.dat",Number(m),1)):(m=0,savefile("C:/Program Files/optisocubes/storedMoves.dat",Number(m),1)))}catch(t){r=1,m=0}o.r0(r),(e=ct.createLinearGradient(0,canvas.height/2,canvas.width,canvas.height/2)).addColorStop(0,"rgba(255, 233, 0, 1.000)"),e.addColorStop(.15,"rgba(255, 255, 0, 1.000)"),e.addColorStop(.85,"rgba(255, 255, 0, 1.000)"),e.addColorStop(1,"rgba(255, 233, 0, 1.000)")},x=function(){I||(N.any()&&(i0=!0),I=!0),V=!1;for(var t=0;t<Z;t++)for(var i=0;i<$;i++)K[t][i].update(),K[t][i].J()&&(V=!0);if(w)o.h0(!0);else if(_){for(g=!1,t=0;t<J.length;t++)J[t].J()&&(g=!0);if(g)for(t=0;t<J.length;t++)J[t].l(),J[t].i(),J[t].u();else{for(t=0;t<J.length;t++)J[t].X(160);t0=!0,_=!1,r++,m+=p,p=0,o.r0(r),j()}}else if(V)for(t=0;t<J.length;t++)J[t].i();else if(t0){for(t=0;t<J.length;t++)J[t].B(!1),J[t].T(!0);J[0].A()&&(t0=!1)}else if(!V){for(t=0;t<J.length;t++)J[t].j();for(t=0;t<J.length;t++)J[t].q(K);for(g=!1,t=0;t<J.length;t++)J[t].J()&&(g=!0);for(t=0;t<J.length;t++)J[t].G();for(var a=0;a<J.length;a++)for(t=0;t<J.length;t++)for(i=0;i<J.length;i++)if(t!=i)for(var s=0;4>s;s++)J[t].H(J[i].m(),J[i].p(),J[i].k(s),s);if(d){for(t=0;t<J.length;t++)J[t].g(!0);d=!1}if(!g)for(t=0;t<J.length;t++)h&&J[t].move(0),f&&J[t].move(1),u&&J[t].move(2),v&&J[t].move(3),l&&J[t].move(4);for(l=!1,t=0;t<J.length;t++)J[t].i(),J[t].o(),J[t].u();if(!g){for(t=0;t<J.length;t++)J[t].B(!1);for(t=0;t<Z;t++)for(i=0;i<$;i++)if(K[t][i].o0())for(s=0;s<J.length;s++)J[s].target(t,i)}for(t=i=0;t<J.length;t++)J[t].S()&&i++;if(i==J.length)for(_=!0,t=0;t<J.length;t++)J[t].Y()}for(i=!1,t=0;t<J.length;t++)J[t].M()&&(i=!0);i&&p++,a0.update()},R=function(){var t;ct.fillStyle=e,ct.fillRect(0,0,canvas.width,canvas.height),t=0<J.length?(J[0].P()+Q)/(2*Q):0;for(var i=Z-1;0<=i;i--)for(var a=0;a<$;a++)K[i][a].a0(t),K[i][a].display();for(i=Z-1;0<=i;i--)for(a=0;a<$;a++)K[i][a].s0();if(0<J.length){for(t=[],a=!1,i=0;i<J.length;i++)(J[i].N()||J[i].F())&&(a=!0);if(a){for(i=c=0;i<2*Z;i++)for(a=0;a<i+1;a++)if(0<Z-(i-a)&&a<$)for(var s=0;s<J.length;s++)J[s].m()==Z-(i-a)-1&&J[s].p()==a&&(t[c++]=s);if(0>J[0].P())for(i=J.length-1;0<=i;i--)J[t[i]].display();else for(i=0;i<J.length;i++)J[t[i]].display()}else{var c=0;for(i=0;i<$;i++)for(a=Z-1;0<=a;a--)for(s=0;s<J.length;s++)J[s].m()==i&&J[s].p()==a&&(t[c++]=s);if(0<J[0].P())for(i=J.length-1;0<=i;i--)J[t[i]].display();else for(i=0;i<J.length;i++)J[t[i]].display()}}o.display()};canvas.addEventListener("mousemove",function(t){t=L(canvas,t),mouseX=t.x,mouseY=t.y},!1),canvas.addEventListener("touchstart",function(){if(!t)var t=event;t.preventDefault(),s=(new Date).getTime(),C.v(t.targetTouches[0].pageX-canvas.offsetLeft,t.targetTouches[0].pageY-canvas.offsetTop)},!1),canvas.addEventListener("touchmove",function(t){t||(t=event),t.preventDefault(),h=!1,f=!1,u=!1,v=!1,P.v(t.targetTouches[0].pageX-canvas.offsetLeft,t.targetTouches[0].pageY-canvas.offsetTop),i(C,P)>F&&(t=(i(C,P)-F)/i(C,P),C.t0(C,P,t)),t=c(C,P),M||(i(C,P)>O?0>=t&&t>=-Math.PI/2?f=!0:t<=-Math.PI/2&&t>=-Math.PI?h=!0:t<=Math.PI/2&&0<=t?v=!0:t<=Math.PI&&t>=Math.PI/2&&(u=!0):(h=!1,f=!1,u=!1,v=!1))},!1),canvas.addEventListener("touchend",function(){v=u=f=h=!1,touchTapEnd=(new Date).getTime(),touchTapEnd<s+t&&(l=!0)},!1),document.body.addEventListener("touchcancel",function(){v=u=f=h=!1,touchTapEnd=(new Date).getTime(),touchTapEnd<s+t&&(l=!0)},!1),document.addEventListener("keydown",function(t){if(h=!1,f=!1,u=!1,v=!1,l=!1,M||(87==t.keyCode||38==t.keyCode?(h=!0,t.preventDefault()):68==t.keyCode||39==t.keyCode?(f=!0,t.preventDefault()):65==t.keyCode||37==t.keyCode?(u=!0,t.preventDefault()):83==t.keyCode||40==t.keyCode?(v=!0,t.preventDefault()):16!=t.keyCode&&32!=t.keyCode||(l||b||(l=!0,b=!0),t.preventDefault())),82==t.keyCode){o.next(-1),_=!0;for(var i=p=0;i<J.length;i++)J[i].R()}w&&(89==t.keyCode&&(w=!1,z(),_=!0,r=0,o.h0(!1),Y()),78==t.keyCode&&(w=!1,o.h0(!1))),13==t.keyCode&&(w=!0)}),document.addEventListener("keyup",function(t){87==t.keyCode||38==t.keyCode?(h=!1,d=!0):68==t.keyCode||39==t.keyCode?(f=!1,d=!0):65==t.keyCode||37==t.keyCode?(u=!1,d=!0):83==t.keyCode||40==t.keyCode?(v=!1,d=!0):16!=t.keyCode&&32!=t.keyCode||(b=!1)});var U=function(){x(),R()},y=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||null;if(null!==y){var W=function(){U(),y(W,canvas)};Y(),y(W,canvas)}else{var X=1e3/60;setInterval(U,X)}var a0={current:0,f0:0,u0:Date.now(),delta:0,v0:Date.now(),l0:function(){ct.fillStyle="white",ct.fillRect(0,0,50,25),ct.font="12pt Arial",ct.fillStyle="black",ct.textBaseline="top",ct.textAlign="left",ct.fillText(a0.f0+"fps",5,5)},update:function(){a0.current++,a0.delta=(Date.now()-a0.v0)/(1e3/60),a0.v0=Date.now(),5<a0.delta&&(a0.delta=5),1e3<=Date.now()-a0.u0&&(a0.f0=a0.current,a0.current=0,a0.u0=Date.now())}},j=function(){try{"undefined"!=typeof Storage&&(loadfile("C:/Program Files/optisocubes/storedLevel.dat"),savefile("C:/Program Files/optisocubes/storedLevel.dat",Number(r),1),loadfile("C:/Program Files/optisocubes/storedMoves.dat"),savefile("C:/Program Files/optisocubes/storedMoves.dat",Number(m),1))}catch(t){}},q=function(){"undefined"!=typeof Storage&&(loadfile("C:/Program Files/optisocubes/storedLevel.dat")?r=Number(loadfile("C:/Program Files/optisocubes/storedLevel.dat")):(r=1,savefile("C:/Program Files/optisocubes/storedLevel.dat",Number(r),1)))},z=function(){try{"undefined"!=typeof Storage&&(loadfile("C:/Program Files/optisocubes/storedLevel.dat")&&localStorage.removeItem("C:/Program Files/optisocubes/storedLevel.dat"),loadfile("C:/Program Files/optisocubes/storedMoves.dat")&&localStorage.removeItem("C:/Program Files/optisocubes/storedMoves.dat"))}catch(t){}},N={b0:function(){return navigator.userAgent.match(/Android/i)},d0:function(){return navigator.userAgent.match(/BlackBerry/i)},g0:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},M0:function(){return navigator.userAgent.match(/Opera Mini/i)},m0:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return N.b0()||N.d0()||N.g0()||N.M0()||N.m0()}};