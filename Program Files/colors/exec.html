<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<script src="../../helper.js"></script>
	<link rel="shortcut icon" href="#iofs:C:/Program Files/colors/icon.svg">
	<link rel="stylesheet" href="imgstyle.css">
	<link rel="stylesheet" href="../../helper.min.css">
	<title>Colors</title>
</head>
<body>
	<div id="imgs"></div>

	<script>
		// generate a variable with random colors
		let colors = Array.from({ length: 400 }, randomColor);

		// generate a random color
		function randomColor() {
			const r = Math.floor(Math.random() * 256);
			const g = Math.floor(Math.random() * 256);
			const b = Math.floor(Math.random() * 256);
			return `rgb(${r}, ${g}, ${b})`;
		}

		// create squares with the random colors
		function createSquares(colors) {
			colors.forEach(color => {
				const square = document.createElement("div");
				square.style.backgroundColor = color;
				square.onclick = () => copyToClipboard(square.style.backgroundColor);
				document.getElementById("imgs").appendChild(square);
			});
		}

		// copy the color code to the clipboard
		function copyToClipboard(text) {
			const input = document.createElement("input");
			input.value = text;
			document.body.appendChild(input);
			input.select();
			document.execCommand("copy");
			document.body.removeChild(input);
		}

		// load more colors when reaching the end of the page
		window.onscroll = function() {
			if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight - 500) {
				const newColors = Array.from({ length: 100 }, randomColor);
				colors = colors.concat(newColors);
				createSquares(newColors);
			}
		};

		// initial load
		createSquares(colors);
	</script>
</body>
</html>
